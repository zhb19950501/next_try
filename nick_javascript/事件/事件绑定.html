<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <script>
        /*
        为元素添加多个事件
            .addEventListener(事件，函数，是否启用捕获)

        事件的传播：
            1.捕获阶段
                - 在捕获阶段，由外侧祖先元素，向目标元素进行事件的捕获，但是默认此时不会触发事件
            2.目标阶段
                - 事件捕获到目标元素，捕获结束
            3.冒泡阶段
                -事件从目标元素向他的祖先元素传递，依次触发祖先元素上捕获的事件

            IE8以下没有事件捕获阶段
        
        */

        window.onload = function () {
            var div = document.getElementById("test");
            div.addEventListener("click", function () { alert("第一次") }, false);
            div.addEventListener("click", function () { alert(this) }, false);
            bind("click", div, function(){alert(this)});


            /*
            bind（）函数的实现
                .addEventListener()
                    不兼容IE8及以下
                    该方法中的this，是绑定事件的对象

                .attachEvent()
                    IE8以下使用该方法
                    该方法中的this，是window
                        通过将回调函数放入一个匿名函数中，让window调用匿名函数，然后再在匿名函数中使用call方法指定回调函数的调用对象，
                        修改返回的this
            
            */

            function bind(event, obj, callback) {
                if (obj.addEventListener) {
                    obj.addEventListener(event, callback, false)
                }
                else {

                    obj.attachEvent("on" + event, function () {
                        callback.call(obj)
                    })

                }

            }

        }


    </script>
    <style>
        div {
            width: 100px;
            height: 100px;
            background-color: #bbffaa;
        }
    </style>
</head>

<body>
    <div id="test"></div>
</body>

</html>